## Stuff still to do

Coding:
- [X] Refactor
    - [X] Rename crates: network_node, host_node. Update dependencies // Cawa 
    - [X] Refactor NetworkNode // Fede (all of them)
        - [X] handle_packet
        - [X] handle_command -> in the right place, but to implement
        - [X] handle_flood_request
        - [X] handle_routed_packet
        - [?] (verify routing -> internal function)
        - [X] add_channel
        - [X] remove_channel
        - [X] (broadcast_packet -> internal function)
        - [X] build_ack
        - [X] build_nack
        - [X] build_flood_response
        - [X] reverse_packet_routing_direction (use it consistently)
    - [X] Introduce HostNode and get all functions which are common to client and server inside it. This should live inside a common crate, which should be called host_node. This crate lives inside a private repository.
        - [X] handle_message_fragments (same only to client and server, but created a homonymous function for the drone)
        - [X] run
        - [X] send_flood_request (rename to initiate_flood_request)
        - [X] initialize_topology
        - [X] update_topology
        - [X] handle_flood_response
        - [X] get_topology_print_string 

- [ ] New features
    - [X] Communication between the simulation controller and the nodes.
        - [X] Crash, SetPacketDropRate (Simulation Controller -> Drone)
        - [X] AddSender, RemoveSender (Move to NetworkNode trait) // Cawa
            - [X] (Simulation Controller -> Drone)
            - [X] (Simulation Controller -> Client) // Cawa
            - [X] (Simulation Controller -> Server) // Cawa
        - [X] PacketSent (Drone, Client, Server -> Simulation Controller) (Move to NetworkNode trait)
            - [X] (Drone -> Simulation Controller)
            - [X] (Client -> Simulation Controller)
            - [X] (Server -> Simulation Controller)
        - [X] PacketDropped (Drone -> Simulation Controller)
        - [X] ControllerShortcut (Drone -> Simulation Controller) // Nathan
        - [X] HostShortcut (Simulation Controller -> Client, Server) // Nathan
        - [X] New commands from sim controller to clients/servers:
            - [X] Client that gets all the types of the servers in the net
    - [X] GUI of simulation controller
    - [X] Assembler of packet fragments
    - [X] Use simulation controller and network initializer in tests // Wendelin (general tests)
    - [X] Add toml files for all topologies defined in the document
    - [X] When sending a crash command, we should check that we can actually crash that drone: be sure that the crash of that drone doesn't split the network + a server has to be connected to at least 2 drones + a client must remain connected to at least 1 and at most 2 drones
    - [X] Check the topology given at the start -> it has to respect all the costraints above
    - [ ] Pay attention to how the Droneevent->ControllerShortcut should be used and what they are useful for.
    - [X] Check that we actually receive acks when sending packets

- [X] Clarifications on how everything is working
    - [X] Make a file with all the general FAQ that we come up with (related both to the protocol and our implementation)

- [ ] Only keep useful logs
- [ ] Make the network with a mix of other drones 
- [ ] Handle the random spawn of new drones (among drones of other groups)
- [X] Test things with different (and especially high) pdrs
- [ ] Fix the crash of a drone
    - [ ] When receiving a nack caused by a crashed drone, send a new flood request and then communicate whatever you had to communicate
    - [ ] When a client/server calculates the path for the message, if the channel to the first hop doesn't exists (because the simulation controller) send a flood request and then resend what had to be sent